# 智能自主练习系统 - 需求说明书

{% hint style="info" %}
**文档版本**: V1.1 | **编制日期**: 2024年1月 | **编制单位**: 上海即驰教育科技有限公司
{% endhint %}

## 1. 引言

### 1.1 编写目的

本文档旨在对《智能自主练习系统》的服务需求进行详细描述，以确保开发团队和利益相关者在项目开发和实施过程中达成共识，明确说明系统各功能的实现方式，指导开发人员进行编码。

**预期读者**：项目组及建设单位、监理单位相关人员、学校管理者、教师和学生用户。

### 1.2 项目背景

项目将提供学校智能练习平台、管理平台，涵盖：

* 学校题库管理
* 自主练习功能
* 错题管理系统
* 知识点诊断和分析

为提升学生自主学习能力、帮助教师精准教学、实现个性化教育提供技术支撑。

{% tabs %}
{% tab title="系统信息" %}
| 项目 | 说明 |
|------|------|
| 系统名称 | 智能自主练习系统 (Kedge Self-Practice Platform) |
| 目标客户 | 初中在校老师、学生、教育管理人员 |
| 委托单位 | 上海即驰教育科技有限公司 |
{% endtab %}

{% tab title="项目范围" %}
* 知识点管理与题库建设
* 学生自主练习与评测
* 智能错题推荐与薄弱点分析
* 题目报错与质量管理
* 学习数据分析与报表
{% endtab %}
{% endtabs %}

### 1.3 术语和定义

<details>
<summary><strong>知识点 (Knowledge Point)</strong></summary>
课程体系中的具体知识单元，如"中国古代史-秦汉时期"、"生物-细胞结构"等，是组织题目和评估学习的基本单位。
</details>

<details>
<summary><strong>练习会话 (Practice Session)</strong></summary>
学生进行一次完整练习活动的记录，包含选择的知识点、题目数量、答题情况等信息。
</details>

<details>
<summary><strong>题目解析 (Quiz Explanation)</strong></summary>
当学生答错题目时显示的教育性反馈内容，帮助学生理解错误原因和正确解法。
</details>

<details>
<summary><strong>题目报告 (Quiz Report)</strong></summary>
学生对题目质量问题的反馈机制，包括显示错误、答案错误、知识点关联错误等多种类型。
</details>

<details>
<summary><strong>薄弱点分析 (Weak Points Analysis)</strong></summary>
基于学生答题数据，自动识别学生掌握不佳的知识点，用于个性化推荐。
</details>

<details>
<summary><strong>AI智能评估 (AI Evaluation)</strong></summary>
使用人工智能技术对主观题答案进行自动评分和反馈，提供客观公正的评价。
</details>

<details>
<summary><strong>练习策略 (Practice Strategy)</strong></summary>
系统提供的不同练习模式，如"快速练习"、"错题重练"、"薄弱点强化"等，满足不同学习需求。
</details>

<details>
<summary><strong>DOCX题目导入</strong></summary>
允许教师通过上传Word文档批量导入题目，支持高亮标注识别，大大提高题目录入效率。
</details>

---

## 2. 任务概述

### 2.1 任务目标

系统建设的主要目标内容包括四大核心系统：

{% tabs %}
{% tab title="智能题库管理系统" %}
* 支持多学科知识点体系管理
* 提供题目创建、编辑、分类管理功能
* 支持DOCX批量导入与智能解析
* 具备题目质量监控与优化能力
{% endtab %}

{% tab title="自主练习系统" %}
* 提供个性化练习配置功能（题型、数量、时限等）
* 支持实时答题与即时反馈
* 配备智能错题集管理功能
* 能进行薄弱知识点诊断
{% endtab %}

{% tab title="学习分析系统" %}
* 提供全面的练习数据统计分析功能
* 支持知识掌握度评估
* 学习进度跟踪
* 班级和个人排行榜功能
{% endtab %}

{% tab title="质量保障系统" %}
* 完善的学生题目报错机制
* 教师审核处理流程
* 支持题目解析完善
* 确保持续质量改进
{% endtab %}
{% endtabs %}

### 2.2 运行环境

#### 硬件环境

| 服务器类型 | 操作系统 | CPU | 内存 | 硬盘 | 数量 |
|-----------|---------|-----|------|------|------|
| 数据库服务器 | Ubuntu 20.04 | 8核 | 32GB | 1TB SSD | 1台 |
| 应用服务器 | Ubuntu 20.04 | 8核 | 16GB | 500GB SSD | 2台 |
| 缓存服务器 | Ubuntu 20.04 | 4核 | 16GB | 200GB SSD | 1台 |
| 文件存储服务器 | Ubuntu 20.04 | 4核 | 8GB | 2TB | 1台 |

#### 软件环境

| 软件 | 功能 | 版本 | 备注 |
|------|------|------|------|
| Ubuntu | 服务器操作系统 | 20.04 LTS | 长期支持版本 |
| PostgreSQL | 主数据库 | 15.5 | 支持JSON、全文检索 |
| Redis | 缓存和会话管理 | 7.0 | 热点数据缓存 |
| Node.js | 后端服务运行环境 | 18.x LTS | 长期支持版本 |
| NestJS | 后端框架 | 10.x | 企业级Node.js框架 |
| React | 前端框架 | 18.x | 用户界面开发 |
| Nginx | 反向代理、负载均衡 | 1.24 | 静态资源服务 |
| Docker | 应用容器化 | 24.x | 容器化部署 |
| Hasura | GraphQL引擎 | 2.35 | 数据库元数据管理 |

### 2.3 条件与限制

{% hint style="warning" %}
**关键限制条件**
{% endhint %}

1. **安全要求**：系统需支持本地化内网部署，敏感数据不得外传
2. **并发限制**：系统需支持至少1000名学生同时在线练习
3. **响应时间**：页面加载时间不超过2秒，API响应时间不超过500ms
4. **数据备份**：支持自动定时备份，数据保留至少1年
5. **浏览器兼容**：支持Chrome、Firefox、Safari、Edge最新版本

---

## 3. 数据描述

### 3.1 核心数据表设计

#### 3.1.1 用户表 (users)

**表说明**：存储系统中所有用户的基本信息和认证信息

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | UUID | ✅ | 用户ID，主键 |
| name | VARCHAR(100) | ✅ | 姓名 |
| email | VARCHAR(200) | ❌ | 邮箱，唯一索引 |
| password_hash | VARCHAR(255) | ✅ | 密码哈希，使用PBKDF2加密 |
| role | ENUM | ✅ | 用户角色：student/teacher/admin |
| class | VARCHAR(50) | 学生必填 | 班级 |
| is_active | BOOLEAN | ✅ | 是否激活，默认true |
| created_at | TIMESTAMP | ✅ | 创建时间 |
| updated_at | TIMESTAMP | ✅ | 更新时间 |

#### 3.1.2 知识点表 (knowledge_points)

**表说明**：构建学科知识体系的树形结构

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | UUID | ✅ | 知识点ID，主键 |
| topic | VARCHAR(200) | ✅ | 知识点名称 |
| parent_id | UUID | ❌ | 父知识点ID，用于构建树形结构 |
| subject | VARCHAR(50) | ✅ | 学科，如history/biology |
| grade_level | VARCHAR(20) | ✅ | 年级 |
| chapter | VARCHAR(100) | ❌ | 章节 |
| section | VARCHAR(100) | ❌ | 小节 |
| difficulty_level | INTEGER | ❌ | 难度等级，范围1-5 |
| importance | INTEGER | ❌ | 重要程度，范围1-5 |

#### 3.1.3 题目表 (quizzes)

**表说明**：存储所有练习题目的内容和答案

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | UUID | ✅ | 题目ID，主键 |
| question | TEXT | ✅ | 题目内容，支持`{{img:n}}`图片占位符 |
| type | ENUM | ✅ | 题目类型 |
| options | JSONB | ❌ | 选项，格式：`{A:'选项1', B:'选项2'...}` |
| answer | TEXT | ✅ | 答案 |
| alternative_answers | TEXT[] | ❌ | 备选答案（填空题） |
| explanation | TEXT | ❌ | 题目解析 |
| knowledge_point_id | UUID | ❌ | 知识点ID，外键关联 |
| difficulty | INTEGER | ❌ | 难度，范围1-5 |
| is_deleted | BOOLEAN | ✅ | 是否删除，软删除标记 |

**题目类型说明**：
* `single-choice`：单选题
* `multiple-choice`：多选题
* `fill-in-the-blank`：填空题
* `subjective`：主观题

#### 3.1.4 练习会话表 (practice_sessions)

**表说明**：记录每次练习活动的整体信息

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | UUID | ✅ | 会话ID，主键 |
| user_id | UUID | ✅ | 用户ID，外键 |
| subject_id | VARCHAR(50) | ❌ | 学科ID |
| strategy | VARCHAR(50) | ❌ | 练习策略：quick/wrong/weak |
| total_questions | INTEGER | ✅ | 总题数 |
| answered_questions | INTEGER | ✅ | 已答题数 |
| correct_answers | INTEGER | ✅ | 正确数 |
| incorrect_answers | INTEGER | ✅ | 错误数 |
| score | DECIMAL(5,2) | ❌ | 得分 |
| start_time | TIMESTAMP | ✅ | 开始时间 |
| end_time | TIMESTAMP | ❌ | 结束时间 |
| duration | INTEGER | ❌ | 用时(秒) |
| is_completed | BOOLEAN | ✅ | 是否完成 |

#### 3.1.5 练习答案表 (practice_answers)

**表说明**：记录每道题的具体答题情况

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | UUID | ✅ | 答案ID，主键 |
| session_id | UUID | ✅ | 会话ID，外键 |
| user_id | UUID | ✅ | 用户ID，外键 |
| quiz_id | UUID | ✅ | 题目ID，外键 |
| user_answer | TEXT | ❌ | 用户答案 |
| is_correct | BOOLEAN | ✅ | 是否正确 |
| time_spent | INTEGER | ❌ | 答题用时(秒) |
| answered_at | TIMESTAMP | ✅ | 答题时间 |

#### 3.1.6 题目报告表 (quiz_reports)

**表说明**：学生对题目问题的反馈记录

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| id | UUID | ✅ | 报告ID，主键 |
| quiz_id | UUID | ✅ | 题目ID，外键 |
| user_id | UUID | ✅ | 报告人ID，外键 |
| report_type | VARCHAR(50) | ✅ | 报告类型 |
| reason | TEXT | ❌ | 问题描述，最多500字符 |
| status | VARCHAR(20) | ✅ | 处理状态 |
| resolved_by | UUID | ❌ | 处理人ID |
| resolved_at | TIMESTAMP | ❌ | 处理时间 |
| resolution_note | TEXT | ❌ | 处理说明 |

**报告类型**：
* `display_error`：显示错误
* `wrong_answer`：答案错误
* `wrong_association`：知识点关联错误
* `duplicate`：题目重复
* `unclear_wording`：表述不清
* `other`：其他问题

**处理状态**：
* `pending`：待处理
* `reviewing`：处理中
* `resolved`：已解决
* `dismissed`：已忽略

---

## 4. 功能需求

### 4.1 功能概述

系统包含以下核心功能模块：

**基础管理功能**
* 用户认证与授权
* 知识点体系管理
* 题库管理与维护
* 系统配置管理

**学习功能**
* 智能练习系统
* 错题管理
* 学习分析
* 排行榜系统

**质量保障功能**
* 题目报错系统
* 解析完善机制
* 数据质量监控

### 4.2 详细功能需求

#### 4.2.1 用户管理模块

{% tabs %}
{% tab title="用户认证功能" %}
* **注册**：支持学生/教师注册，需要验证码
* **登录**：JWT token认证，支持记住登录
* **密码重置**：通过邮箱或管理员重置密码
* **退出登录**：清除token，注销会话
{% endtab %}

{% tab title="用户管理功能" %}
* **用户列表**：查看、搜索、筛选用户
* **批量导入**：通过Excel批量创建用户
* **角色分配**：设置用户角色和权限
* **状态管理**：启用/禁用用户账号
{% endtab %}
{% endtabs %}

#### 4.2.2 知识点管理模块

{% tabs %}
{% tab title="知识体系功能" %}
* **学科管理**：创建、编辑学科分类
* **知识树构建**：构建多级知识点树形结构
* **批量导入**：Excel导入知识点体系
* **关联管理**：知识点与题目的关联
{% endtab %}

{% tab title="知识点操作功能" %}
* **新增知识点**：添加新的知识点节点
* **编辑知识点**：修改知识点信息
* **删除知识点**：软删除，保留关联数据
* **排序调整**：拖拽调整知识点顺序
{% endtab %}
{% endtabs %}

#### 4.2.3 题库管理模块

{% tabs %}
{% tab title="题目管理功能" %}
* **题目创建**：支持四种题型的创建
* **题目编辑**：修改题目内容、答案、解析
* **批量导入**：DOCX文档批量导入，支持高亮识别
* **图片处理**：自动提取、存储题目图片
* **题目预览**：学生视角预览题目效果
{% endtab %}

{% tab title="题目组织功能" %}
* **知识点关联**：将题目关联到知识点
* **难度设置**：设置题目难度等级
* **标签管理**：添加自定义标签分类
* **题目搜索**：全文搜索、条件筛选
{% endtab %}
{% endtabs %}

#### 4.2.4 练习系统模块

{% tabs %}
{% tab title="练习配置功能" %}
* **知识点选择**：选择一个或多个知识点
* **题型设置**：选择练习题型
* **数量设置**：设置题目数量或不限
* **时间限制**：设置练习时间限制
* **练习策略**：快速练习、错题重练、薄弱点强化
{% endtab %}

{% tab title="答题功能" %}
* **题目展示**：清晰展示题目和选项
* **答案提交**：支持键盘快捷键
* **即时反馈**：显示对错和解析
* **进度保存**：自动保存练习进度
* **语音输入**：主观题支持语音输入
{% endtab %}

{% tab title="练习控制功能" %}
* **题目导航**：跳转到指定题目
* **暂停继续**：暂停和恢复练习
* **自动跳转**：答对后自动跳转下一题
* **结束练习**：提交练习获取报告
{% endtab %}
{% endtabs %}

#### 4.2.5 错题管理模块

* **自动收集**：自动记录错题
* **错误分析**：分析错误原因和类型
* **知识点关联**：关联错题到知识点
* **错题重做**：重新练习错题
* **智能推荐**：推荐相似题目强化
* **错题本导出**：导出PDF错题本

#### 4.2.6 学习分析模块

{% tabs %}
{% tab title="个人分析功能" %}
* **练习统计**：练习次数、题目数、正确率
* **知识掌握度**：各知识点掌握情况
* **进步趋势**：正确率变化趋势图
* **薄弱点诊断**：自动识别薄弱知识点
{% endtab %}

{% tab title="班级分析功能" %}
* **班级概况**：班级整体练习情况
* **排行榜**：日榜、周榜、月榜、总榜
* **对比分析**：个人vs班级平均水平
{% endtab %}
{% endtabs %}

#### 4.2.7 题目报告模块

{% tabs %}
{% tab title="问题报告功能" %}
* **报告提交**：学生报告题目问题
* **类型选择**：6种问题类型选择
* **描述补充**：可选的问题描述
* **截图上传**：上传问题截图
{% endtab %}

{% tab title="报告管理功能" %}
* **我的报告**：查看自己提交的报告
* **状态跟踪**：查看处理状态
* **报告修改**：修改待处理的报告
* **处理反馈**：查看教师处理说明
{% endtab %}

{% tab title="教师处理功能" %}
* **报告列表**：查看所有待处理报告
* **批量处理**：批量标记已解决
* **题目修正**：直接修正题目错误
* **统计分析**：报告类型统计分析
{% endtab %}
{% endtabs %}

#### 4.2.8 AI智能功能

{% tabs %}
{% tab title="智能评分功能" %}
* **主观题评分**：AI自动评分主观题答案
* **评分理由**：提供评分依据说明
* **申诉机制**：学生可申请重新评分
{% endtab %}

{% tab title="智能推荐功能" %}
* **题目推荐**：基于学习数据推荐题目
* **知识点推荐**：推荐需要加强的知识点
* **学习路径**：生成个性化学习路径
{% endtab %}
{% endtabs %}

---

## 5. 架构要求

### 5.1 系统架构

系统采用现代化的微服务架构，主要特点：

1. **前后端分离**：前端React SPA，后端RESTful API
2. **微服务设计**：按业务领域划分服务边界
3. **容器化部署**：使用Docker容器化，支持Kubernetes编排
4. **服务网格**：支持服务发现、负载均衡、熔断降级
5. **消息队列**：异步任务处理，解耦服务依赖

### 5.2 技术栈要求

{% tabs %}
{% tab title="后端技术栈" %}
* Node.js + NestJS + TypeScript
* PostgreSQL（主库）+ Redis（缓存）
* Hasura GraphQL引擎
{% endtab %}

{% tab title="前端技术栈" %}
* React + TypeScript + TailwindCSS
* Vite构建工具
* Axios HTTP客户端
{% endtab %}

{% tab title="基础设施" %}
* Docker容器化
* Nginx反向代理
* RabbitMQ/Redis Queue消息队列
{% endtab %}

{% tab title="监控运维" %}
* Prometheus + Grafana监控
* ELK Stack日志分析
{% endtab %}
{% endtabs %}

### 5.3 部署架构

**负载均衡层**
* Nginx负载均衡器
* SSL终端处理
* 静态资源缓存

**应用层**
* 前端服务器（React应用）
* API网关（Kong/Nginx）
* 微服务集群（用户服务、题库服务、练习服务）

**数据层**
* PostgreSQL主从集群
* Redis缓存集群
* 文件存储服务

**支撑层**
* 消息队列服务
* 定时任务服务
* 监控告警服务

---

## 6. 性能需求

### 6.1 响应时间要求

| 指标 | 要求 | 说明 |
|------|------|------|
| 页面加载 | < 2秒 | 首屏渲染时间 |
| API响应 | < 500ms | 95%的请求 |
| 数据查询 | < 200ms | 简单查询 |
| 复杂统计 | < 3秒 | 报表生成 |
| 文件上传 | < 5秒/MB | 题目图片上传 |
| AI评分 | < 5秒 | 主观题评分 |

### 6.2 并发性能要求

* **并发用户数**：支持至少1000用户同时在线
* **并发请求数**：峰值QPS不低于1000
* **数据处理能力**：每日处理练习答案不少于100万条
* **系统可用性**：99.9%以上

### 6.3 数据容量要求

* **用户数据**：支持10万+用户
* **题库容量**：支持100万+题目
* **练习记录**：保存至少2年的练习数据
* **文件存储**：支持至少1TB的附件存储

---

## 7. 运行需求

### 7.1 用户界面

{% tabs %}
{% tab title="学生端界面" %}
* **Web端**：响应式设计，支持PC和平板
* **移动端**：H5自适应，支持微信内置浏览器
* **界面风格**：简洁清新，符合学生审美
* **交互方式**：支持鼠标、键盘快捷键、触摸操作
{% endtab %}

{% tab title="教师端界面" %}
* **管理后台**：PC端为主，功能完整
* **移动管理**：支持移动端查看报表和处理报告
* **数据可视化**：丰富的图表展示
{% endtab %}

{% tab title="管理员界面" %}
* **系统后台**：完整的系统管理功能
* **监控大屏**：实时监控系统运行状态
* **运维工具**：日志查询、性能分析工具
{% endtab %}
{% endtabs %}

### 7.2 接口要求

{% tabs %}
{% tab title="内部接口" %}
* **RESTful API**：统一的REST接口规范
* **GraphQL**：复杂查询场景使用GraphQL
* **WebSocket**：实时通信需求
{% endtab %}

{% tab title="外部接口" %}
* **单点登录**：支持与学校统一认证系统对接
* **数据同步**：支持与教务系统数据同步
* **第三方AI**：支持接入多种AI服务（OpenAI、文心一言等）
{% endtab %}
{% endtabs %}

### 7.3 安全要求

{% tabs %}
{% tab title="数据安全" %}
* 敏感数据传输使用HTTPS加密
* 密码使用PBKDF2算法加密存储
* 重要数据定期备份
{% endtab %}

{% tab title="访问控制" %}
* 基于角色的访问控制（RBAC）
* JWT token认证机制
* API访问频率限制
{% endtab %}

{% tab title="安全防护" %}
* SQL注入防护
* XSS跨站脚本防护
* CSRF跨站请求伪造防护
{% endtab %}

{% tab title="审计追踪" %}
* 记录所有重要操作日志
* 敏感操作需要二次确认
* 日志保留时间不少于6个月
{% endtab %}
{% endtabs %}

---

## 8. 项目实施计划

### 8.1 实施阶段

| 阶段 | 周期 | 主要内容 |
|------|------|----------|
| **第一阶段：基础功能** | 2个月 | 用户管理系统、知识点管理、基础题库功能、简单练习功能 |
| **第二阶段：核心功能** | 3个月 | 完整练习系统、错题管理、学习分析、题目报告功能 |
| **第三阶段：高级功能** | 2个月 | AI智能评分、智能推荐系统、数据分析报表、性能优化 |
| **第四阶段：部署上线** | 1个月 | 系统测试、用户培训、正式上线、运维交接 |

### 8.2 验收标准

{% tabs %}
{% tab title="功能验收" %}
* 所有需求功能点100%实现
* 功能测试通过率达到95%以上
{% endtab %}

{% tab title="性能验收" %}
* 满足所有性能指标要求
* 压力测试无崩溃现象
{% endtab %}

{% tab title="安全验收" %}
* 通过安全测试
* 无高危安全漏洞
{% endtab %}

{% tab title="文档验收" %}
* 提供完整的技术文档
* 提供详细的用户手册
* 提供运维操作手册
{% endtab %}

{% tab title="培训验收" %}
* 完成用户培训
* 培训通过率达90%以上
* 提供培训视频资料
{% endtab %}
{% endtabs %}

---

## 9. 参考资料

本系统设计主要依据以下国家、部委、行业标准：

* 《计算机软件产品开发文件编制指南》GB8567-88
* 《计算机软件需求说明编制指南》GB/T9385—1988
* 《计算机软件开发规范》GB8566
* 《教育信息化2.0行动计划》教技〔2018〕6号
* 《中小学数字校园建设规范（试行）》

---

{% hint style="success" %}
**文档信息**

* 编制单位：上海即驰教育科技有限公司
* 文档版本：V1.1
* 编制日期：2024年1月
{% endhint %}
