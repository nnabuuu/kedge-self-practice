# 自主学习平台 - 操作手册

## 目录
- [学生功能](#学生功能)
- [教师功能](#教师功能)
- [管理员功能](#管理员功能)

---

## 学生功能

### 1. 账户管理
- **注册登录**: 使用账号和密码注册/登录系统
- **查看个人信息**: 查看用户资料和学习偏好设置
- **修改密码**: 修改账户密码
- **偏好设置**: 保存练习偏好(上次访问科目、练习统计等)

### 2. 科目选择
- **浏览可用科目**: 查看系统中所有可用学科
- **选择学习科目**: 选择要练习的科目(如历史、生物等)
- **快速切换科目**: 从练习菜单快速切换到其他科目

### 3. 知识点选择
- **浏览知识点树**: 查看学科的层级知识点结构
  - 按册(volume)分类
  - 按单元(unit)分类
  - 按课(lesson)分类
  - 按小节(section/sub)分类
- **搜索知识点**: 通过关键词搜索知识点
- **选择练习范围**: 勾选一个或多个知识点进行练习

### 4. 练习配置
- **题目来源选择**:
  - 新题练习(new)
  - 包含错题(with-wrong)
  - 仅错题练习(wrong-only)
- **题目数量**: 设置练习题目数量(或选择无限制)
- **时间限制**: 可选设置练习时间限制
- **题目顺序**: 选择顺序或随机打乱
- **题型过滤**: 选择要练习的题型
  - 单选题(single-choice)
  - 多选题(multiple-choice)
  - 填空题(fill-in-the-blank)
  - 主观题/简答题(subjective)
  - 其他题型(other)
- **显示解析**: 选择是否显示答案解析
- **自动跳转**: 设置答对后自动跳转下一题的延迟时间

### 5. 答题练习
- **查看题目**: 查看题目内容(支持图片显示)
- **选择/填写答案**:
  - 单选题: 点选选项
  - 多选题: 勾选多个选项
  - 填空题: 填写答案(支持多个空格)
  - 主观题: 输入文本答案
- **提交答案**: 提交当前题目答案
- **查看答案解析**: 答题后查看正确答案和解析
- **题目导航**:
  - 上一题/下一题
  - 直接跳转到指定题号
  - 查看已答/未答题目列表
- **暂停练习**: 暂停当前练习会话
- **恢复练习**: 继续未完成的练习会话
- **放弃练习**: 结束并记录当前练习
- **AI重新评估**: 对填空题答案进行AI辅助评分

### 6. 快速练习选项
- **快速开始**: 基于上次练习的知识点快速开始5-10分钟练习
- **薄弱知识点**: 系统识别学习薄弱的知识点,提供针对性练习
- **错题本练习**: 自动筛选所有做错的题目进行复习

### 7. 练习结果查看
- **成绩统计**:
  - 总题数、正确数、错误数
  - 正确率、完成率
  - 练习时长
- **答题分布**: 查看各题型的答题情况分布图表
- **知识点表现**: 查看各知识点的正确率
- **题型表现**: 查看各题型的正确率统计
- **学习建议**: 系统提供针对性学习建议
- **快速操作**:
  - 返回菜单
  - 重新练习
  - 查看练习历史
  - 错题强化练习

### 8. 练习历史
- **查看历史记录**: 浏览所有历史练习会话
- **过滤筛选**: 按科目、日期等条件筛选
- **详情查看**: 查看每次练习的详细情况
  - 题目列表和答题情况
  - 时间分布
  - 知识点分布
- **删除记录**: 删除不需要的练习记录

### 9. 知识点分析
- **总体掌握度**: 查看所有知识点的整体掌握情况
- **知识点热力图**: 可视化展示各知识点的熟练程度
- **薄弱知识点**: 列出需要加强的知识点
- **进步趋势**: 查看学习进步曲线
- **强化训练**: 针对薄弱知识点开启强化练习

### 10. 个人数据分析(My Analytics)
- **练习统计**: 总体练习次数、题目数、正确率等
- **知识点统计**: 各知识点练习情况和掌握度
- **进步分析**: 时间维度的学习进步趋势
- **错题统计**: 错题数量、类型分布、知识点分布

### 11. 题目反馈
- **提交问题反馈**: 对题目质量或内容提出意见
- **查看我的反馈**: 查看自己提交的反馈及处理状态

---

## 教师功能

**注意**: 教师拥有所有学生功能,另外增加以下管理功能:

### 1. 账户管理
- **注册教师账户**: 创建教师角色账户
- **登录系统**: 使用教师权限登录平台

### 2. 教师仪表板(Management Center)
- **概览统计**: 查看整体学生练习情况
- **快速导航**: 访问各管理功能模块

### 3. 题库管理(Quiz Bank Management)
- **查看题库**:
  - 浏览所有题目
  - 按知识点、题型、标签筛选
  - 搜索题目
- **手动添加题目**:
  - 输入题目文本
  - 设置题型和选项
  - 添加答案和解析
  - 关联知识点
  - 上传题目图片
- **批量导入题目**:
  - 支持Excel批量导入
  - 支持DOCX文档解析导入
- **编辑题目**: 修改已有题目的内容
- **删除题目**: 删除不合适的题目
- **标签管理**: 为题目添加自定义标签

### 4. DOCX文档解析工具
- **上传Word文档**:
  - 拖拽上传或点击选择
  - 支持包含高亮文本的文档
  - 自动提取文档中的图片
- **选择LLM提供商**: 选择OpenAI或Azure OpenAI进行解析
- **选择题型**: 指定要生成的题型(单选、多选、填空、主观题)
- **AI智能解析**:
  - 从高亮文本自动生成题目
  - 提取图片并关联到题目
  - 智能识别题型和答案
- **编辑解析结果**:
  - 预览生成的题目
  - 手动编辑和调整
- **知识点匹配**:
  - AI智能推荐知识点
  - 手动选择或调整知识点
- **批量提交**: 确认后批量导入题库
- **导出Excel**: 将题目导出为Excel格式

### 5. 知识点管理(Knowledge Point Management)
- **查看知识点树**: 浏览完整的知识点层级结构
- **搜索知识点**: 通过关键词搜索
- **按层级筛选**: 按册/单元/课/节筛选
- **查看统计信息**: 查看每个知识点关联的题目数量
- **刷新知识点**: 重新加载知识点数据
- **智能建议**: 获取知识点匹配建议

### 6. 学生管理(User Management)
- **查看学生列表**: 浏览所有注册学生
- **搜索学生**: 按姓名或账号搜索
- **按角色筛选**: 筛选学生/教师
- **查看学生详情**:
  - 基本信息
  - 练习记录
  - 成绩统计
  - 知识点掌握情况

### 7. 排行榜(Leaderboard)
- **练习次数榜**: 按练习次数排名
- **正确率榜**: 按正确率排名
- **班级统计**: 查看班级整体表现
- **学生练习详情**: 查看指定学生的练习详情
- **会话详情**: 查看具体练习会话的详细信息

### 8. 题目错误率分析(Quiz Error Rate Analytics)
- **错误率排行**: 查看错误率最高的题目
- **过滤选项**:
  - 按知识点筛选
  - 按题型筛选
  - 按时间范围筛选
- **题目详情**: 查看题目的详细错误分析
  - 答题人数
  - 正确率
  - 错误选项分布
  - 学生列表和答题情况
- **性能对比**: 对比不同学生群体的表现
- **导出数据**: 导出错误率分析报告为Excel

### 9. 学生统计(Statistics)
- **整体统计**: 查看所有学生的练习统计
- **个人统计**: 查看单个学生的详细统计
- **练习会话**: 查看所有练习会话记录

### 10. 题目反馈管理(Report Management)
- **查看所有反馈**: 浏览学生提交的题目反馈
- **筛选过滤**:
  - 按状态筛选(待处理/已处理/已关闭)
  - 按时间筛选
- **处理反馈**:
  - 更新反馈状态
  - 添加处理备注
  - 批量更新多个反馈
- **反馈分析**: 查看反馈统计和趋势

### 11. AI配置管理(AI Config Management)
- **配置OpenAI参数**: 设置API密钥和模型
- **配置Azure OpenAI**: 设置endpoint和deployment
- **测试连接**: 验证AI服务配置是否正确

### 12. 系统设置(Settings)
- **系统配置查看**: 查看系统配置参数
- **配置更新**: 更新系统配置(如果有权限)

---

## 管理员功能

**注意**: 管理员拥有所有教师和学生功能,另外增加以下特权功能:

### 1. 用户管理(Admin - User Management)
- **查看所有用户**:
  - 学生列表
  - 教师列表
  - 管理员列表
- **搜索用户**: 按姓名或账号搜索
- **按角色筛选**: 筛选特定角色的用户
- **分页浏览**: 支持大量用户数据的分页查看
- **创建用户**:
  - 设置账号ID(account)
  - 设置密码(可选,默认使用账号作为密码)
  - 设置姓名
  - 指定角色(student/teacher/admin)
  - 设置班级(学生必填)
- **批量创建用户**:
  - 上传用户列表
  - 批量导入学生或教师
  - 自动生成默认密码
- **修改用户密码**: 重置用户密码
- **删除用户**: 删除不需要的用户账户
- **查看用户统计**: 查看用户总数、各角色分布等

### 2. 系统配置管理(System Config)
- **查看所有配置**: 浏览系统所有配置项
- **按键查询配置**: 查询指定配置项的值
- **更新配置**: 修改系统配置参数
  - OpenAI API配置
  - Azure OpenAI配置
  - 其他系统参数

### 3. 文件附件管理(Attachments)
- **查看附件**: 查看所有上传的文件附件
- **访问题目图片**: 查看题目关联的图片文件
- **存储统计**: 查看文件存储使用情况
  - 总文件数
  - 存储空间占用
  - 按类型/日期统计

### 4. 知识点数据管理
- **重新加载知识点**: 从数据源重新加载知识点数据
- **查看加载状态**: 查看知识点数据的加载信息
- **刷新知识点缓存**: 刷新知识点数据缓存

### 5. 科目配置管理
- **查看所有科目**: 浏览系统中配置的所有学科
- **查看科目详情**: 查看单个科目的配置信息
- **检查科目状态**: 查看科目是否启用
- **重新加载科目配置**: 刷新科目配置数据

---

## 访问端点

### API服务器
- **地址**: `http://localhost:8718`
- **API文档**: `http://localhost:8718/swagger-ui`
- **健康检查**: `http://localhost:8718/v1/index/health`

### 学生练习应用
- **目录**: `frontend-practice/`
- **启动**: `npm run dev`
- **说明**: 学生端练习界面

### 教师题库工具
- **目录**: `frontend-quiz-parser/`
- **启动**: `npm run dev`
- **说明**: 教师端题目管理和导入工具

### 数据库管理
- **PostgreSQL**: `localhost:7543`
- **Hasura GraphQL**: `http://localhost:28717`
- **Hasura Console**: 通过Hasura CLI访问

---

## 技术支持

如需帮助,请参考:
- 项目文档: `docs/` 目录
- 功能说明: `docs/pages/` 目录
- 技术文档: `docs/technical/` 目录
- 需求说明: `docs/需求说明书.md`

---

## 更新日志

**最新功能** (2024):
- ✅ 增强的DOCX解析,支持图片提取
- ✅ 安全的文件存储系统
- ✅ 带JWT认证的静态文件服务
- ✅ 完整的题目提交流程(单个/批量/含图片)
- ✅ 附件管理和存储统计
- ✅ Swagger API文档
- ✅ 基于角色的访问控制

---

*本手册最后更新: 2025年1月*
