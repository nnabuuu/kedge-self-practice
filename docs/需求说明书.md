# 智能自主练习系统服务—需求说明书

## 1 引言

### 1.1 编写目的
本文档旨在对《智能自主练习系统》的服务需求进行详细描述，以确保开发团队和利益相关者在项目开发和实施过程中达成共识，明确说明系统各功能的实现方式，指导开发人员进行编码。

本说明书的预期读者为：项目组及建设单位、监理单位相关人员、学校管理者、教师和学生用户。

### 1.2 项目背景
项目将提供学校智能练习平台、管理平台，涵盖学校题库、自主练习、错题管理、知识点诊断和分析功能，为提升学生自主学习能力、帮助教师精准教学、实现个性化教育提供技术支撑。

系统基本信息包括：系统名称为智能自主练习系统（Kedge Self-Practice Platform），目标客户为初中在校老师、学生、教育管理人员，委托单位为教育科技有限公司。

项目范围涵盖知识点管理与题库建设、学生自主练习与评测、智能错题推荐与薄弱点分析、题目报错与质量管理以及学习数据分析与报表等功能模块。

### 1.3 术语和定义

本系统涉及的关键术语定义如下：

知识点（Knowledge Point）指课程体系中的具体知识单元，如"中国古代史-秦汉时期"、"生物-细胞结构"等，是组织题目和评估学习的基本单位。

练习会话（Practice Session）是学生进行一次完整练习活动的记录，包含选择的知识点、题目数量、答题情况等信息。

题目解析（Quiz Explanation）是当学生答错题目时显示的教育性反馈内容，帮助学生理解错误原因和正确解法。

题目报告（Quiz Report）是学生对题目质量问题的反馈机制，包括显示错误、答案错误、知识点关联错误等多种类型。

薄弱点分析（Weak Points Analysis）基于学生答题数据，自动识别学生掌握不佳的知识点，用于个性化推荐。

AI智能评估（AI Evaluation）使用人工智能技术对主观题答案进行自动评分和反馈，提供客观公正的评价。

练习策略（Practice Strategy）指系统提供的不同练习模式，如"快速练习"、"错题重练"、"薄弱点强化"等，满足不同学习需求。

DOCX题目导入功能允许教师通过上传Word文档批量导入题目，支持高亮标注识别，大大提高题目录入效率。

### 1.4 参考资料

本系统设计主要依据以下国家、部委、行业标准：
- 《计算机软件产品开发文件编制指南》GB8567-88
- 《计算机软件需求说明编制指南》GB/T9385—1988
- 《计算机软件开发规范》GB8566
- 《教育信息化2.0行动计划》教技〔2018〕6号
- 《中小学数字校园建设规范（试行）》

## 2 任务概述

### 2.1 任务目标

系统建设的主要目标内容包括四大核心系统：

第一，智能题库管理系统。该系统支持多学科知识点体系管理，提供题目创建、编辑、分类管理功能，支持DOCX批量导入与智能解析，并具备题目质量监控与优化能力。
第二，自主练习系统。该系统提供个性化练习配置功能，包括题型、数量、时限等参数设置。系统支持实时答题与即时反馈，配备智能错题集管理功能，并能进行薄弱知识点诊断。
第三，学习分析系统。该系统提供全面的练习数据统计分析功能，支持知识掌握度评估和学习进度跟踪，并提供班级和个人排行榜功能，激发学生学习积极性。
第四，质量保障系统。该系统建立了完善的学生题目报错机制和教师审核处理流程，支持题目解析完善，确保持续质量改进。

### 2.2 运行环境

#### 2.2.1 硬件环境

**数据库系统服务器**
- 操作系统：Ubuntu 20.04
- CPU：8核
- 内存：32GB
- 硬盘：1TB SSD
- 数量：1台

**应用服务系统服务器**
- 操作系统：Ubuntu 20.04
- CPU：8核
- 内存：16GB
- 硬盘：500GB SSD
- 数量：2台

**缓存系统服务器**
- 操作系统：Ubuntu 20.04
- CPU：4核
- 内存：16GB
- 硬盘：200GB SSD
- 数量：1台

**文件存储系统服务器**
- 操作系统：Ubuntu 20.04
- CPU：4核
- 内存：8GB
- 硬盘：2TB
- 数量：1台

为了方便维护和扩展，系统采用微服务架构，各服务可独立部署和扩容。前期可使用容器化部署在少量服务器上，后期根据负载情况进行横向扩展。

#### 2.2.2 软件环境

**Ubuntu操作系统**
- 功能：服务器操作系统
- 版本：20.04 LTS
- 备注：长期支持版本

**PostgreSQL数据库**
- 功能：主数据库
- 版本：15.5
- 备注：支持JSON、全文检索

**Redis缓存数据库**
- 功能：缓存和会话管理
- 版本：7.0
- 备注：热点数据缓存

**Node.js运行环境**
- 功能：后端服务运行环境
- 版本：18.x LTS
- 备注：长期支持版本

**NestJS框架**
- 功能：后端框架
- 版本：10.x
- 备注：企业级Node.js框架

**React框架**
- 功能：前端框架
- 版本：18.x
- 备注：用户界面开发

**Nginx服务器**
- 功能：反向代理、负载均衡
- 版本：1.24
- 备注：静态资源服务

**Docker容器**
- 功能：应用容器化
- 版本：24.x
- 备注：容器化部署

**Hasura引擎**
- 功能：GraphQL引擎
- 版本：2.35
- 备注：数据库元数据管理

### 2.3 条件与限制

1. **安全要求**：系统需支持本地化内网部署，敏感数据不得外传
2. **并发限制**：系统需支持至少1000名学生同时在线练习
3. **响应时间**：页面加载时间不超过2秒，API响应时间不超过500ms
4. **数据备份**：支持自动定时备份，数据保留至少1年
5. **浏览器兼容**：支持Chrome、Firefox、Safari、Edge最新版本

## 3 数据描述

### 3.1 核心数据表设计

#### 3.1.1 用户表（users）

**表说明**：存储系统中所有用户的基本信息和认证信息

**字段设计**：
- **id** - 用户ID，UUID类型，主键，必填
- **name** - 姓名，VARCHAR(100)，必填
- **email** - 邮箱，VARCHAR(200)，唯一索引，选填
- **password_hash** - 密码哈希，VARCHAR(255)，必填，使用PBKDF2加密
- **role** - 用户角色，ENUM类型，必填，可选值：student/teacher/admin
- **class** - 班级，VARCHAR(50)，学生必填
- **is_active** - 是否激活，BOOLEAN，必填，默认true
- **created_at** - 创建时间，TIMESTAMP，必填
- **updated_at** - 更新时间，TIMESTAMP，必填

#### 3.1.2 知识点表（knowledge_points）

**表说明**：构建学科知识体系的树形结构

**字段设计**：
- **id** - 知识点ID，UUID类型，主键，必填
- **topic** - 知识点名称，VARCHAR(200)，必填
- **parent_id** - 父知识点ID，UUID，选填，用于构建树形结构
- **subject** - 学科，VARCHAR(50)，必填，如history/biology
- **grade_level** - 年级，VARCHAR(20)，必填
- **chapter** - 章节，VARCHAR(100)，选填
- **section** - 小节，VARCHAR(100)，选填
- **difficulty_level** - 难度等级，INTEGER，选填，范围1-5
- **importance** - 重要程度，INTEGER，选填，范围1-5
- **created_at** - 创建时间，TIMESTAMP，必填
- **updated_at** - 更新时间，TIMESTAMP，必填

#### 3.1.3 题目表（quizzes）

**表说明**：存储所有练习题目的内容和答案

**字段设计**：
- **id** - 题目ID，UUID类型，主键，必填
- **question** - 题目内容，TEXT，必填，支持{{img:n}}图片占位符
- **type** - 题目类型，ENUM，必填
  - single-choice：单选题
  - multiple-choice：多选题
  - fill-in-the-blank：填空题
  - subjective：主观题
- **options** - 选项，JSONB，选填，格式：{A:'选项1', B:'选项2'...}
- **answer** - 答案，TEXT，必填，可以是字母、数组或文本
- **alternative_answers** - 备选答案，TEXT[]，选填，填空题的其他正确答案
- **explanation** - 题目解析，TEXT，选填，答错时显示的教育内容
- **knowledge_point_id** - 知识点ID，UUID，选填，外键关联
- **difficulty** - 难度，INTEGER，选填，范围1-5
- **is_deleted** - 是否删除，BOOLEAN，必填，软删除标记
- **created_at** - 创建时间，TIMESTAMP，必填
- **updated_at** - 更新时间，TIMESTAMP，必填

#### 3.1.4 练习会话表（practice_sessions）

**表说明**：记录每次练习活动的整体信息

**字段设计**：
- **id** - 会话ID，UUID类型，主键，必填
- **user_id** - 用户ID，UUID，必填，外键
- **subject_id** - 学科ID，VARCHAR(50)，选填
- **strategy** - 练习策略，VARCHAR(50)，选填
  - quick：快速练习
  - wrong：错题重练
  - weak：薄弱点强化
- **total_questions** - 总题数，INTEGER，必填
- **answered_questions** - 已答题数，INTEGER，必填
- **correct_answers** - 正确数，INTEGER，必填
- **incorrect_answers** - 错误数，INTEGER，必填
- **score** - 得分，DECIMAL(5,2)，选填
- **start_time** - 开始时间，TIMESTAMP，必填
- **end_time** - 结束时间，TIMESTAMP，选填
- **duration** - 用时(秒)，INTEGER，选填
- **is_completed** - 是否完成，BOOLEAN，必填
- **auto_advance_delay** - 自动跳转延迟(秒)，INTEGER，选填
- **created_at** - 创建时间，TIMESTAMP，必填

#### 3.1.5 练习答案表（practice_answers）

**表说明**：记录每道题的具体答题情况

**字段设计**：
- **id** - 答案ID，UUID类型，主键，必填
- **session_id** - 会话ID，UUID，必填，外键
- **user_id** - 用户ID，UUID，必填，外键，冗余字段用于排行榜
- **quiz_id** - 题目ID，UUID，必填，外键
- **user_answer** - 用户答案，TEXT，选填
- **is_correct** - 是否正确，BOOLEAN，必填
- **time_spent** - 答题用时(秒)，INTEGER，选填
- **answered_at** - 答题时间，TIMESTAMP，必填
- **created_at** - 创建时间，TIMESTAMP，必填

#### 3.1.6 题目报告表（quiz_reports）

**表说明**：学生对题目问题的反馈记录

**字段设计**：
- **id** - 报告ID，UUID类型，主键，必填
- **quiz_id** - 题目ID，UUID，必填，外键
- **user_id** - 报告人ID，UUID，必填，外键
- **session_id** - 会话ID，UUID，选填，外键
- **report_type** - 报告类型，VARCHAR(50)，必填
  - display_error：显示错误
  - wrong_answer：答案错误
  - wrong_association：知识点关联错误
  - duplicate：题目重复
  - unclear_wording：表述不清
  - other：其他问题
- **reason** - 问题描述，TEXT，选填，最多500字符
- **user_answer** - 用户答案，TEXT，选填，报告时的答案
- **quiz_context** - 题目上下文，JSONB，选填，问题快照
- **status** - 处理状态，VARCHAR(20)，必填
  - pending：待处理
  - reviewing：处理中
  - resolved：已解决
  - dismissed：已忽略
- **resolved_by** - 处理人ID，UUID，选填，外键
- **resolved_at** - 处理时间，TIMESTAMP，选填
- **resolution_note** - 处理说明，TEXT，选填
- **created_at** - 创建时间，TIMESTAMP，必填
- **updated_at** - 更新时间，TIMESTAMP，必填

#### 3.1.7 附件表（attachments）

**表说明**：存储题目相关的图片、文档等文件

**字段设计**：
- **id** - 附件ID，UUID类型，主键，必填
- **quiz_id** - 题目ID，UUID，必填，外键
- **file_path** - 文件路径，VARCHAR(500)，必填
- **file_name** - 文件名，VARCHAR(255)，必填
- **file_type** - 文件类型，VARCHAR(50)，必填，如image/doc
- **file_size** - 文件大小(字节)，INTEGER，必填
- **mime_type** - MIME类型，VARCHAR(100)，必填
- **url** - 访问URL，VARCHAR(500)，必填
- **created_at** - 创建时间，TIMESTAMP，必填

## 4 功能需求

### 4.1 功能概述

系统包含以下核心功能模块：

**基础管理功能**
- 用户认证与授权
- 知识点体系管理
- 题库管理与维护
- 系统配置管理

**学习功能**
- 智能练习系统
- 错题管理
- 学习分析
- 排行榜系统

**质量保障功能**
- 题目报错系统
- 解析完善机制
- 数据质量监控

### 4.2 详细功能需求

#### 4.2.1 用户管理模块

**用户认证功能**
- **注册**：支持学生/教师注册，需要验证码
- **登录**：JWT token认证，支持记住登录
- **密码重置**：通过邮箱或管理员重置密码
- **退出登录**：清除token，注销会话

**用户管理功能**
- **用户列表**：查看、搜索、筛选用户
- **批量导入**：通过Excel批量创建用户
- **角色分配**：设置用户角色和权限
- **状态管理**：启用/禁用用户账号

#### 4.2.2 知识点管理模块

**知识体系功能**
- **学科管理**：创建、编辑学科分类
- **知识树构建**：构建多级知识点树形结构
- **批量导入**：Excel导入知识点体系
- **关联管理**：知识点与题目的关联

**知识点操作功能**
- **新增知识点**：添加新的知识点节点
- **编辑知识点**：修改知识点信息
- **删除知识点**：软删除，保留关联数据
- **排序调整**：拖拽调整知识点顺序

#### 4.2.3 题库管理模块

**题目管理功能**
- **题目创建**：支持四种题型的创建
- **题目编辑**：修改题目内容、答案、解析
- **批量导入**：DOCX文档批量导入，支持高亮识别
- **图片处理**：自动提取、存储题目图片
- **题目预览**：学生视角预览题目效果

**题目组织功能**
- **知识点关联**：将题目关联到知识点
- **难度设置**：设置题目难度等级
- **标签管理**：添加自定义标签分类
- **题目搜索**：全文搜索、条件筛选

#### 4.2.4 练习系统模块

**练习配置功能**
- **知识点选择**：选择一个或多个知识点
- **题型设置**：选择练习题型
- **数量设置**：设置题目数量或不限
- **时间限制**：设置练习时间限制
- **练习策略**：快速练习、错题重练、薄弱点强化

**答题功能**
- **题目展示**：清晰展示题目和选项
- **答案提交**：支持键盘快捷键
- **即时反馈**：显示对错和解析
- **进度保存**：自动保存练习进度
- **语音输入**：主观题支持语音输入

**练习控制功能**
- **题目导航**：跳转到指定题目
- **暂停继续**：暂停和恢复练习
- **自动跳转**：答对后自动跳转下一题
- **结束练习**：提交练习获取报告

#### 4.2.5 错题管理模块

**错题收集功能**
- **自动收集**：自动记录错题
- **错误分析**：分析错误原因和类型
- **知识点关联**：关联错题到知识点

**错题练习功能**
- **错题重做**：重新练习错题
- **智能推荐**：推荐相似题目强化
- **错题本导出**：导出PDF错题本

#### 4.2.6 学习分析模块

**个人分析功能**
- **练习统计**：练习次数、题目数、正确率
- **知识掌握度**：各知识点掌握情况
- **进步趋势**：正确率变化趋势图
- **薄弱点诊断**：自动识别薄弱知识点

**班级分析功能**
- **班级概况**：班级整体练习情况
- **排行榜**：日榜、周榜、月榜、总榜
- **对比分析**：个人vs班级平均水平

#### 4.2.7 题目报告模块

**问题报告功能**
- **报告提交**：学生报告题目问题
- **类型选择**：6种问题类型选择
- **描述补充**：可选的问题描述
- **截图上传**：上传问题截图

**报告管理功能**
- **我的报告**：查看自己提交的报告
- **状态跟踪**：查看处理状态
- **报告修改**：修改待处理的报告
- **处理反馈**：查看教师处理说明

**教师处理功能**
- **报告列表**：查看所有待处理报告
- **批量处理**：批量标记已解决
- **题目修正**：直接修正题目错误
- **统计分析**：报告类型统计分析

#### 4.2.8 AI智能功能

**智能评分功能**
- **主观题评分**：AI自动评分主观题答案
- **评分理由**：提供评分依据说明
- **申诉机制**：学生可申请重新评分

**智能推荐功能**
- **题目推荐**：基于学习数据推荐题目
- **知识点推荐**：推荐需要加强的知识点
- **学习路径**：生成个性化学习路径

## 5 架构要求

### 5.1 系统架构

系统采用现代化的微服务架构，主要特点：

1. **前后端分离**：前端React SPA，后端RESTful API
2. **微服务设计**：按业务领域划分服务边界
3. **容器化部署**：使用Docker容器化，支持Kubernetes编排
4. **服务网格**：支持服务发现、负载均衡、熔断降级
5. **消息队列**：异步任务处理，解耦服务依赖

### 5.2 技术栈要求

**后端技术栈**
- Node.js + NestJS + TypeScript
- PostgreSQL（主库）+ Redis（缓存）
- Hasura GraphQL引擎

**前端技术栈**
- React + TypeScript + TailwindCSS
- Vite构建工具
- Axios HTTP客户端

**基础设施**
- Docker容器化
- Nginx反向代理
- RabbitMQ/Redis Queue消息队列

**监控运维**
- Prometheus + Grafana监控
- ELK Stack日志分析

### 5.3 部署架构

系统采用分层架构设计：

**负载均衡层**
- Nginx负载均衡器
- SSL终端处理
- 静态资源缓存

**应用层**
- 前端服务器（React应用）
- API网关（Kong/Nginx）
- 微服务集群（用户服务、题库服务、练习服务）

**数据层**
- PostgreSQL主从集群
- Redis缓存集群
- 文件存储服务

**支撑层**
- 消息队列服务
- 定时任务服务
- 监控告警服务

## 6 性能需求

### 6.1 响应时间要求

**页面加载**
- 要求：小于2秒
- 说明：首屏渲染时间

**API响应**
- 要求：小于500ms
- 说明：95%的请求

**数据查询**
- 要求：小于200ms
- 说明：简单查询

**复杂统计**
- 要求：小于3秒
- 说明：报表生成

**文件上传**
- 要求：小于5秒/MB
- 说明：题目图片上传

**AI评分**
- 要求：小于5秒
- 说明：主观题评分

### 6.2 并发性能要求

- **并发用户数**：支持至少1000用户同时在线
- **并发请求数**：峰值QPS不低于1000
- **数据处理能力**：每日处理练习答案不少于100万条
- **系统可用性**：99.9%以上

### 6.3 数据容量要求

- **用户数据**：支持10万+用户
- **题库容量**：支持100万+题目
- **练习记录**：保存至少2年的练习数据
- **文件存储**：支持至少1TB的附件存储

## 7 运行需求

### 7.1 用户界面

#### 7.1.1 学生端界面
- **Web端**：响应式设计，支持PC和平板
- **移动端**：H5自适应，支持微信内置浏览器
- **界面风格**：简洁清新，符合学生审美
- **交互方式**：支持鼠标、键盘快捷键、触摸操作

#### 7.1.2 教师端界面
- **管理后台**：PC端为主，功能完整
- **移动管理**：支持移动端查看报表和处理报告
- **数据可视化**：丰富的图表展示

#### 7.1.3 管理员界面
- **系统后台**：完整的系统管理功能
- **监控大屏**：实时监控系统运行状态
- **运维工具**：日志查询、性能分析工具

### 7.2 接口要求

#### 7.2.1 内部接口
- **RESTful API**：统一的REST接口规范
- **GraphQL**：复杂查询场景使用GraphQL
- **WebSocket**：实时通信需求

#### 7.2.2 外部接口
- **单点登录**：支持与学校统一认证系统对接
- **数据同步**：支持与教务系统数据同步
- **第三方AI**：支持接入多种AI服务（OpenAI、文心一言等）

### 7.3 安全要求

**数据安全**
- 敏感数据传输使用HTTPS加密
- 密码使用PBKDF2算法加密存储
- 重要数据定期备份

**访问控制**
- 基于角色的访问控制（RBAC）
- JWT token认证机制
- API访问频率限制

**安全防护**
- SQL注入防护
- XSS跨站脚本防护
- CSRF跨站请求伪造防护

**审计追踪**
- 记录所有重要操作日志
- 敏感操作需要二次确认
- 日志保留时间不少于6个月

## 8 项目实施计划

### 8.1 实施阶段

#### 第一阶段：基础功能（2个月）
- 用户管理系统
- 知识点管理
- 基础题库功能
- 简单练习功能

#### 第二阶段：核心功能（3个月）
- 完整练习系统
- 错题管理
- 学习分析
- 题目报告功能

#### 第三阶段：高级功能（2个月）
- AI智能评分
- 智能推荐系统
- 数据分析报表
- 性能优化

#### 第四阶段：部署上线（1个月）
- 系统测试
- 用户培训
- 正式上线
- 运维交接

### 8.2 验收标准

**功能验收**
- 所有需求功能点100%实现
- 功能测试通过率达到95%以上

**性能验收**
- 满足所有性能指标要求
- 压力测试无崩溃现象

**安全验收**
- 通过安全测试
- 无高危安全漏洞

**文档验收**
- 提供完整的技术文档
- 提供详细的用户手册
- 提供运维操作手册

**培训验收**
- 完成用户培训
- 培训通过率达90%以上
- 提供培训视频资料

## 9 附录

### 9.1 系统界面原型

系统主要界面包括：
- 学生练习界面
- 题目报告界面
- 个人中心界面
- 教师管理界面
- 数据分析界面

（此处应附上实际的界面原型图）

### 9.2 业务流程图

核心业务流程包括：
- 用户注册登录流程
- 练习答题流程
- 题目报告处理流程
- 错题重练流程
- 数据分析流程

（此处应附上实际的流程图）

### 9.3 数据字典

完整的数据库设计文档，包括：
- 表结构详细说明
- 字段类型和约束
- 索引设计
- 外键关系

### 9.4 接口文档

API接口规范，包括：
- 接口URL规则
- 请求参数说明
- 响应格式定义
- 错误码列表

---

**文档版本**：V1.1  
**编制日期**：2024年1月  
**编制单位**：教育科技有限公司  
**审核人**：  
**批准人**：